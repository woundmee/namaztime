<!-- #2563eb -->

<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Расписание намазов | Namaztime
</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

<link href="styles.css" rel="stylesheet">
</head>
<body>
<header>
  <div class="container border-bottom">
    <header class="d-flex justify-content-center py-3">
      <ul class="nav nav-pills">
        <li class="nav-item"><a href="#" id="mainLink" class="nav-link text-secondary active rounded-pill" aria-current="page">Главная</a></li>
        <li class="nav-item"><a href="#" id="faqLink" class="nav-link text-secondary rounded-pill">FAQ</a></li>
        <li class="nav-item">
          <button id="themeToggle" class="btn btn-link text-secondary nav-link">
            <i id="themeIcon" class="bi bi-sun-fill"></i>
          </button>
        </li>
      </ul>
    </header>
  </div>
</header>

<div id="mainContent">
  <div class="container">
    <div class="px-4 py-5 my-3 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="76" height="76" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
        <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022zm2.004.45a7 7 0 0 0-.985-.299l.219-.976q.576.129 1.126.342zm1.37.71a7 7 0 0 0-.439-.27l.493-.87a8 8 0 0 1 .979.654l-.615.789a7 7 0 0 0-.418-.302zm1.834 1.79a7 7 0 0 0-.653-.796l.724-.69q.406.429.747.91zm.744 1.352a7 7 0 0 0-.214-.468l.893-.45a8 8 0 0 1 .45 1.088l-.95.313a7 7 0 0 0-.179-.483m.53 2.507a7 7 0 0 0-.1-1.025l.985-.17q.1.58.116 1.17zm-.131 1.538q.05-.254.081-.51l.993.123a8 8 0 0 1-.23 1.155l-.964-.267q.069-.247.12-.501m-.952 2.379q.276-.436.486-.908l.914.405q-.24.54-.555 1.038zm-.964 1.205q.183-.183.35-.378l.758.653a8 8 0 0 1-.401.432z" />
        <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0z" />
        <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5" />
      </svg>

      <h1 class="display-5 fw-bold">Расписание намазов</h1>
      <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" style="margin-top: -0.1rem;" width="16" height="16" fill="#2563eb" class="bi bi-patch-check-fill" viewBox="0 0 16 16">
            <path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708" />
          </svg>
          Официально по городу Норильск
        </p>

        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
          <button id="btnToday" type="button" class="btn btn-primary px-4 rounded-pill">Сегодня</button>
          <button id="btnMonth" type="button" class="btn btn-outline-primary px-4 rounded-pill">Месяц</button>
        </div>
      </div>
    </div>

    <table id="namazTable" class="table mb-5 text-center" style="border-radius: 15px; overflow: hidden;">
      <thead class="">
        <tr>
          <th class="table-header-color" scope="col">День</th>
          <th class="table-header-color" scope="col">Фаджр</th>
          <th class="table-header-color" scope="col">Восход</th>
          <th class="table-header-color" scope="col">Зухр</th>
          <th class="table-header-color" scope="col">Аср</th>
          <th class="table-header-color" scope="col">Магриб</th>
          <th class="table-header-color" scope="col">Иша</th>
        </tr>
      </thead>
      <tbody id="namazTableBody" class="border">
        <!-- Данные будут загружаться сюда -->
      </tbody>
    </table>
  </div>
</div>

<!-- =========================== -->
<!-- PAGE: FAQ: ВОПРОСЫ И ОТВЕТЫ -->
<!-- =========================== -->

<div id="faqContent" class="container my-5">
  <h1 class="text-center mb-4">Часто задаваемые вопросы</h1>
  
  <div class="accordion" id="faqAccordion">
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
          Что это за сайт?
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
        <div class="accordion-body">
          Это веб-приложение для получения расписания намазов по г. Норильск. Расписание официальное и берется с официального <a href="https://t.me/nurdkamal">telegram-канала</a> "Нурд-Камал".
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
          Как я могу распечатать расписание?
        </button>
      </h2>
      <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
        <div class="accordion-body">
          Пока такой возможности нет. Попробуйте через встроенные возможности самого браузера (CTRL+P для Google Chrome), но это не гарантирует вам удобной и красивой разметки таблицы с расписанием намазов.
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
          Для разработчиков
        </button>
      </h2>
      <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
        <div class="accordion-body">
          Приложение написано на основе REST API протокола. 
          Чтобы получить расписание намазов за текущий день по г. Норильск, необходимо отправить GET-запрос по url: <code>/namaztime/today</code>.
          Чтобы получить расписание намазов за весь текущий месяц, необходимо отправить GET-запрос по url: <code>/namaztime/month</code>
          <br>
          <br>
          ℹ Проект полностью open-source. Если есть предложения, улучшения или нашли ошибку - создайте issue или сделайте fork через Pull-request.
          <a href="https://github.com/woundmee/namaztime-api/">Ссылка на проект (Gitub)</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Функция для загрузки данных
  async function fetchNamazData(endpoint) {
    try {
      const response = await fetch(`http://localhost:8080${endpoint}`);
      const data = await response.json();
      return data;
    } catch (error) {
      console.error('Ошибка загрузки данных:', error);
      return null;
    }
  }

  // Функция для отрисовки данных в таблице
  function renderNamazTable(data) {
    const tableBody = document.getElementById('namazTableBody');
    tableBody.innerHTML = ''; // Очищаем таблицу

    // Проверяем, является ли data массивом или объектом
    const dataToRender = Array.isArray(data) ? data : [data];

    dataToRender.forEach(item => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <th scope="row">${item.Day}</th>
        <td>${item.Fajr}</td>
        <td>${item.Sunrise}</td>
        <td>${item.Zuhr}</td>
        <td>${item.Asr}</td>
        <td>${item.Magrib}</td>
        <td>${item.Isha}</td>
      `;
      tableBody.appendChild(row);
    });
  }

  // Обработчики кнопок
  const btnToday = document.getElementById('btnToday');
  const btnMonth = document.getElementById('btnMonth');

  btnToday.addEventListener('click', async () => {
    const data = await fetchNamazData('/namaztime/today');
    if (data) {
      renderNamazTable(data);
      btnToday.classList.replace('btn-outline-primary', 'btn-primary');
      btnMonth.classList.replace('btn-primary', 'btn-outline-primary');
    }
  });

  btnMonth.addEventListener('click', async () => {
    const data = await fetchNamazData('/namaztime/month');
    if (data) {
      renderNamazTable(data);
      btnMonth.classList.replace('btn-outline-primary', 'btn-primary');
      btnToday.classList.replace('btn-primary', 'btn-outline-primary');
    }
  });

  // Переключение темы
  const themeToggle = document.getElementById('themeToggle');
  const themeIcon = document.getElementById('themeIcon');
  const htmlElement = document.documentElement;

  themeToggle.addEventListener('click', () => {
    const currentTheme = htmlElement.getAttribute('data-bs-theme');
    
    if (currentTheme === 'light') {
      htmlElement.setAttribute('data-bs-theme', 'dark');
      themeIcon.classList.remove('bi-sun-fill');
      themeIcon.classList.add('bi-moon-fill');
    } else {
      htmlElement.setAttribute('data-bs-theme', 'light');
      themeIcon.classList.remove('bi-moon-fill');
      themeIcon.classList.add('bi-sun-fill');
    }
  });

  // Навигация между страницами
  const mainLink = document.getElementById('mainLink');
  const faqLink = document.getElementById('faqLink');
  const mainContent = document.getElementById('mainContent');
  const faqContent = document.getElementById('faqContent');

  mainLink.addEventListener('click', (e) => {
    e.preventDefault();
    mainContent.style.display = 'block';
    faqContent.style.display = 'none';
    mainLink.classList.add('active');
    faqLink.classList.remove('active');
  });

  faqLink.addEventListener('click', (e) => {
    e.preventDefault();
    mainContent.style.display = 'none';
    faqContent.style.display = 'block';
    faqLink.classList.add('active');
    mainLink.classList.remove('active');
  });

  // Автоматическая загрузка данных при загрузке страницы
  document.addEventListener('DOMContentLoaded', async () => {
    const data = await fetchNamazData('/namaztime/today');
    if (data) renderNamazTable(data);
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>